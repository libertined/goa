(function(){"use strict";BX.namespace("BX.Grid");BX.Grid.PinHeader=function(e){this.parent=null;this.fixedTable=null;this.header=null;this.init(e)};BX.Grid.PinHeader.prototype={init:function(e){this.parent=e;this.fixedTable=this.getFixedTable();this.header=this.getHeader();this.headerTop=BX.pos(this.header).top;BX.bind(window,"resize",BX.delegate(this.adjustFixedTablePosition,this));this.bindOnScroll()},bindOnScroll:function(){BX.bind(window,"scroll",BX.delegate(this._onScroll,this))},getFixedTable:function(){var e;if(!this.fixedTable){e=BX.create("div",{props:{className:"main-grid-fixed-bar main-grid-fixed-top"}});this.fixedTable=BX.create("table",{props:{className:"main-grid-table"}});e.appendChild(this.fixedTable);this.parent.getScrollContainer().parentNode.appendChild(e)}return this.fixedTable},checkHeaderPosition:function(){return this.headerTop<=window.scrollY},getHeader:function(){this.header=this.header||this.parent.getHead();return this.header},pinHeader:function(){if(!this.isPinned()){var e=this.getFixedTable();var i=this.parent.getRows().getHeadFirstChild().getCells();var t=Object.keys(i);t.forEach(function(e){var t=BX.firstChild(i[e]);if(t){var n=i[e].getBoundingClientRect();t.style.width=n.width+"px"}});var n=BX.clone(this.header);e.appendChild(n);var d=e.parentNode.parentNode.getBoundingClientRect();e.parentNode.style.width=d.width+"px";BX.onCustomEvent(window,"Grid::headerPinned",[])}},unpinHeader:function(){if(this.isPinned()){BX.html(this.getFixedTable(),"");BX.onCustomEvent(window,"Grid::headerUnpinned",[])}},isPinned:function(){return this.getFixedTable().children.length},adjustFixedTablePosition:function(){if(this.getFixedTable()){var e=this.parent.getContainer().getBoundingClientRect();var i=e.left;var t=e.width;if(i!==this.lastLeftPos){this.getFixedTable().parentNode.style.left=i+"px"}if(t!==this.lastContainerWidth){this.getFixedTable().parentNode.style.width=t+"px"}this.lastLeftPos=i;this.lastContainerWidth=t}},_onScroll:function(){this.adjustFixedTablePosition();if(this.checkHeaderPosition()){this.pinHeader()}else{this.unpinHeader()}}}})();
//# sourceMappingURL=pin-header.map.js